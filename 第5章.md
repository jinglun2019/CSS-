## 字母 x 的下边缘线就是基线

## 字母 x 的高度（x-height）是等分线(mean line)和中线(midline)的距离

## vertical-align:middle 的 middle 指的是基线往上 1/2 x-height 高度（跟上文的中线不同），近似为 x 的交叉的那个点

## 微软雅黑 vertical-align:middle 不是垂直居中，而是略偏下

## ex 是 CSS 中的一个相对单位，指的是小写字母 x 的高度，就是 x-height

## 利用 1ex 实现图标与文字天然居中

```
.icon-arrow {
 display: inline-block;
 width: 20px;
 height: 1ex;
 background: url(arrow.png) no-repeat center;
}
```

## <div>高度是由里面的文字撑开的，不是 font-size 决定的，而是 line-height

## 非替换元素的纯内联元素，其可视高度完全由 line-height 决定

## 行距 = 行高 − em-box。转换成 CSS 语言就是：行距 = line-height - font-size。

## 是宋体的时候，内容区域（选中区域）和 em-box 是等同的

## 利用行距还原设计稿时，如果标注的是文字上边距，则向下取整；如果是文字下边距，则向上取整

## line-height 可以影响替换元素（如图片的高度）吗？

不可以

```
<!-- 虽然图片占据的高度变高了，但line-height影响的是幽灵空白节点 -->
.box {
 line-height: 256px;
}
<div class="box">
 <img src="1.jpg" height="128">
</div>
```

## 让单行文字垂直居中，只要设置 line-height 大小和 height 高度一样就可以了？

错！

- 只要设置 line-height 即可，height 非必须
- 行高控制文字垂直居中，不仅适用于单行，多行也是可以的。不过，只是近似居中

## 不同字体 line-height:normal 并不相同，微软雅黑约 1.32，宋体 1.14

## 父元素设置 line-height:150%和 line-height:1.5em，子元素继承的是父元素计算完的值

## 在 CSS 中，计算行高的时候，行高值一定不要向下舍入，而要向上舍入。

14\*1.42857 计算机近乎是 20px，但是显示可能为 19px

## 内联元素 line-height 的“大值特性”

```
<div class="box">
 <span>内容...</span>
</div>

.box {
 line-height: 96px;
}
.box span {
 line-height: 20px;
}

.box {
 line-height: 20px;
}
.box span {
 line-height: 96px;
}

<!-- box高度都是96px -->
```

## box 高度是多少

```
.box { line-height: 32px; }
.box > span { font-size: 24px; }
<div class="box">
 <span>文字</span>
</div>

<!-- box高度居然是36px -->
<!-- 原因：幽灵空白节点的高度跟span高度不一样，文字按基线对齐，就会有异常 -->
<!-- 解决方案1：.box {
 line-height: 32px;
 font-size: 24px;
}
.box > span { }  -->
<!-- 方案2：.box { line-height: 32px; }
.box > span {
 font-size: 24px;
 vertical-align: top;
}  -->
```

## vertical- align 的计算值是正值还是负值，如果是负值，往下偏移，如果是正值，往上偏移。baseline 等于 0

## line-height 是相对于 font-size 计算的，而这里的 vertical-align 属性的百分比值则是相对于 line-height 的计算值计算的

## vertical-align 只在内联和 display:table-cell 上生效，但是在 absolute 以及 float 上也会失效

## 以下为什么不会生效

```
.box {
 height: 128px;
}
.box > img {
 height: 96px;
 vertical-align: middle;
}
<div class="box">
 <img src="1.jpg">
</div>
<!-- 因为幽灵空白节点太小所以不会生效 -->
<!-- box添加line-height:128px即可正常居中 -->
```

## vertical-align:middle 设置在 table-cell 元素上才能生效

## 图片底部有间隙问题

```
box {
 width: 280px;
 outline: 1px solid #aaa;
 text-align: center;
}
.box > img {
 height: 96px;
}
<div class="box">
 <img src="1.jpg">
</div>
<!-- 幽灵空白节点行高20px，字体14px，字母x半行间距是3px；文字和图片默认基线对齐，导致图片底部留白 -->

解决方案：
1、图片块状化。一口气干掉幽灵空白节点、line-height、vertical-align
2、容器 line-height 足够小，比如0
3、容器 font-size 足够小，比如0
4、图片设置其他 vertical-align 属性值
```

## inline-block 元素，里面没有内联元素，或 overflow 不是 visible,则该元素的基线就是其 margin 底边缘，否则是元素里面最后一行内联元素的基线
