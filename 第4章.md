## 替换元素——修改某个属性值，内容会被替换的元素

eg: input、iframe、img、input、object、textarea

## 替换元素的特性

- 内容元素不受 CSS 影响，即在样式表现在 CSS 作用域之外；
- 有自己的尺寸。如 video、iframe、canvas 默认尺寸 300\*150；img 默认尺寸为 0；
- 在 css 属性上有自己的一套规则。vertical-align 默认值为 baseline， 在非替换元素中为 x 的下边缘，替换元素则为元素的下边缘（替换元素没有 x）；

## 替换元素的尺寸

- 固有尺寸，即原本尺寸，比如 canvas 是 300\*150；
- HTML 尺寸，写在 HTML 上的尺寸，比如 img 的 width、height；input 的 size；
- CSS 的 width/height、max-width/min-width、max-height/min-height 设置的尺寸；

## 替换元素尺寸计算规则

- CSS 尺寸>HTML 尺寸>固有尺寸；
- 如果固有尺寸有固定的宽高，其他尺寸仅设置了宽或高，则按照固有比例显示；
- 内联替换元素和块级替换元素使用上面同一套尺寸计算规则；

## div:before {content: url(1.jpg); display: block; width: 200px; height: 200px; }图片宽高是多少？

会按固有尺寸显示，而不是 200px

## img 没有 src 属性就属于非替换元素

## 非替换元素加上 content 就成替换元素了，叫匿名替换元素

## 基于伪元素的图片内容生成技术

```
<!-- 原理没有src的img属于非替换元素，有伪元素；有src的则不是，此时after属性失效 -->
img::after {
 /* 生成 alt 信息 */
 content: attr(alt);
 /* 尺寸和定位 */
 position: absolute; bottom: 0;
 width: 100%;
 background-color: rgba(0,0,0,.5);
 transform: translateY(100%);
 /* 来点过渡动画效果 */
 transition: transform .2s;
}
img:hover::after {
 /* alt 信息显示 */
 transform: translateY(0);
}
```

## seo 友好的方式写 logo

```
  <h1>CSS世界</h1>

  h1 {
    content:url(logo.svg);
  }
```

## content 属性元素的特性

- 不能左右:empty;
- 无法被选中，就像 user-select:none 一样;
- 生成的值不能动态获取

## P58 TODO

## content 可以是 unicode 字符

## 实现...动画

```
正在加载中<dot></dot>

dot {
  display:inline-block;
  height:1em;
  line-height:1;
  overflow:hidden;
}

dot::before {
  display:block;
  content:'...\A..\A.';
  white-space:pre-wrap;
  animation:dot 3s infinite step-start both;
}

@keyframes dot {
  33% {transform:translateY(-33%)}
  66% {transform:translateY(-66%)}
}
```

## content attr 获取 html 属性

```
img::after {
 /* 生成 alt 信息 */
 content: attr(alt);
}

.icon:before {
 content: attr(data-title);
}
```

## counter-reset 默认设置为 0

## counter-reset 也可以同时设置 2 个，.xxx { counter-reset: wangxiaoer 2 wangxiaosan 3; }

## counter-increment 也可以同时设置 2 个 {counter-increment: wangxiaoer wangxiaosan;}

## counter-increment: counter -1

## content: counter(wangxiaoer, lower-roman);

## counters(name, string);

## counter 与 reset 不能是兄弟元素

```
.reset {
  padding-left: 20px;
  counter-reset: wangxiaoer;
}
.counter:before {
  content: counters(wangxiaoer, '-') '. ';
  counter-increment: wangxiaoer;
}
```

## 对内联元素来说，padding 可以影响自身大小，但是对上下元素的布局没有任何影响，可以使用这个特性扩大点击面积，锚点定位时留出更多空余等等

## 利用此特性实现分隔线

```
<a>登录<a><a>注册</a>

a + a:before {
  content:'';
  font-size:0;
  padding:10px 3px 1px;
  border-left:1px solid gray;
}
```

## CSS 中不影响其他元素布局而是出现层叠效果的现象有两种情况。一种影响外部尺寸，一种不影响（纯视觉），通过设置 overflow:auto 如果没有滚动条就是纯视觉的

## padding 百分比值均通过宽度计算

## 实现横贯整个屏幕的头图（按百分比实现）

```
  .box {
    padding:10% 50%;
    position:relative;
  }
  .box>img {
    position:absolute;
    top:0;
    bottom:0;
    left:0;
    right:0;
  }
```

## P93 TODO

## clip 表示到元素上右下左的距离（即每个边裁掉多少）

## 单元素实现三条杠

```
   .icon-menu {
        display: inline-block;
        color: aqua;
        width: 140px;
        height: 10px;
        padding: 35px 0;
        border-top: 10px solid;
        border-bottom: 10px solid;
        background-color: currentColor;
        background-clip: content-box;
      }
```

## 元素尺寸的相关概念

- 元素尺寸，也叫元素偏移尺寸。元素的 border-box 尺寸,有 offsetWidth、offsetHeight。
- 元素内部尺寸，也叫元素可视尺寸。元素的 padding-box 尺寸，有 clientWidth、clientHeight。
- 元素外部尺寸。元素的 margin-box 尺寸。

## margin 负边距两端对齐布局

```
  ul {
    margin-right:-20px;
  }
  li {
    float:left;
    width:100px;
    margin-right:20px;
  }
```

## P98 浮动不懂

## 父级高度不定，怎么让两个子级实现等高布局

```
法一：
<div id="colLeft" class="column-left">
    <h4>正方观点</h4>
    <p>观点1</p>
</div>
<div id="colRight" class="column-right">
    <h4>反方观点</h4>
    <p>观点1</p>
</div>

.column-right {
 margin-bottom: -9999px;
 padding-bottom: 9999px;
}
.column-box {
 overflow: hidden;
}

法二：
display:table-cell
```

## margin 的百分比值也是相对宽度计算

## margin 合并发生的条件

- 块状元素。不含浮动及绝对布局
- 只发生在文档流相垂直方向

## margin 合并的 3 种情况

- 相邻兄弟元素 margin 合并

```
  p { margin: 1em 0; }
  <p>第一行</p>
  <p>第二行</p>
```

- 父级和第一个/最后一个子元素

```
  <div class="father">
   <div class="son" style="margin-top:80px;"></div>
  </div>
  <div class="father" style="margin-top:80px;">
    <div class="son"></div>
  </div>
  <div class="father" style="margin-top:80px;">
   <div class="son" style="margin-top:80px;"></div>
  </div>
```

- 空块级元素的 margin 合并

```
.father { overflow: hidden; }
.son { margin: 1em 0; }
<div class="father">
 <div class="son"></div>
</div>
```

## 如何阻止 margin-top/margin-bottom 合并

- 父元素设置为块状格式化上下文元素（overflow:hidden 可以）
- 父元素设置 border-top/border-bottom 值；
- 父元素设置 padding-top/padding-bottom 值；
- 父元素和第一个/最后一个子元素之间添加内联元素进行分隔。
- 父元素设置 height、max-height、min-height

> jQuery 中有个$().slideUp()/$().slideDown()方法,使用动画时产生跳动，很有可能时类添加了 overflow:hidden 消除了合并

## 消除空 div 的合并

- 设置垂直方向的 border；
- 设置垂直方向的 padding；
- 里面添加内联元素（直接 Space 键空格是没用的）；
- 设置 height 或者 min-height。

## margin 合并规则：正正取大值，正负值相加，负负取最负

## margin 合并的意义

- 兄弟元素合并，为了让图文信息排版更自然
- 父子 margin 合并，在页面任何地方放入空 div，都不会对页面有影响
